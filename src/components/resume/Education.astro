---
import Section from "./Section.astro";
import cv from "@cv";

interface Props {
	class?: string;
}
const { class: className } = Astro.props;
const { education, certificates } = cv;
---

<Section title="Education" class={className}>
	<ul class="flex flex-col gap-4 print:gap-1">
		{education.map(({ institution, startDate, endDate, area, studyType, url }) => {
			const startYear = new Date(startDate).getFullYear();
			const endYear = endDate != null ? new Date(endDate).getFullYear() : "Present";

			return (
				<li class="grid sm:grid-cols-[120px_1fr] gap-1 sm:gap-4">
					<div class="text-xs c-gray-500 dark:c-gray-400 pt-0.5">
						{startYear} - {endYear}
					</div>
					<div>
						<h4 class="text-sm font-semibold dark:c-gray-100">
							{url ? (
								<a class="c-gray-800 dark:c-gray-200 hover:c-gray-900 dark:hover:c-gray-100 underline underline-offset-3 decoration-dotted" href={url} target="_blank">
									{institution}
								</a>
							) : (
								<span>{institution}</span>
							)}
						</h4>
						<div class="text-xs c-gray-600 dark:c-gray-400">
							{studyType} - {area}
						</div>
					</div>
				</li>
			);
		})}
	</ul>

	{certificates && certificates.length > 0 && (
		<div class="mt-4 pt-4 border-t-1 border-gray-100 dark:border-gray-800">
			<h4 class="text-xs c-gray-500 dark:c-gray-400 uppercase tracking-wider mb-3">Certificates</h4>
			<ul class="flex flex-col gap-3 print:gap-1">
				{certificates.map(({ name, date, issuer, url }) => {
					const year = new Date(date).getFullYear();
					return (
						<li class="grid sm:grid-cols-[120px_1fr] gap-1 sm:gap-4">
							<div class="text-xs c-gray-500 dark:c-gray-400 pt-0.5">{year}</div>
							<div>
								<h5 class="text-sm font-semibold dark:c-gray-100">
									{url ? (
										<a class="c-gray-800 dark:c-gray-200 hover:c-gray-900 dark:hover:c-gray-100 underline underline-offset-3 decoration-dotted" href={url} target="_blank">{name}</a>
									) : (
										<span>{name}</span>
									)}
								</h5>
								<div class="text-xs c-gray-600 dark:c-gray-400">{issuer}</div>
							</div>
						</li>
					);
				})}
			</ul>
		</div>
	)}
</Section>
